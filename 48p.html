<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ì˜ í•˜ë£¨ ì¼ê¸°</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0 300px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            aspect-ratio: 16 / 9;
            padding: 20px;
            box-sizing: border-box;
            overflow: auto;
        }
        .diary-form {
            width: 100%;
            height: 100%;
            border: 1px solid #e0e0e0;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            overflow-y: auto;
        }
        .date-header {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
        }
        .weather-icons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        .time-slot {
            margin: 15px 0;
            padding: 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        textarea {
            width: 100%;
            min-height: 60px;
            margin-top: 5px;
            padding: 0 5px;
        }
        input[type="text"] {
            width: 100%;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
            margin: 5px 0;
        }
        .row {
            display: flex;
            justify-content: space-between;
            gap: 30px;
            margin: 20px 0;
            padding: 0 15px;
        }

        .column {
            flex: 1;
            padding: 15px;
        }
    </style>
</head>
<body>
    <div class="diary-form">
        <div class="header">
            <input type="date" id="Date">
            <div class="weather">
                ë‚ ì”¨:
                <label><input type="radio" name="weather" value="sunny"> â˜€ï¸</label>
                <label><input type="radio" name="weather" value="cloudy"> â˜ï¸</label>
                <label><input type="radio" name="weather" value="rainy"> â˜”</label>
                <label><input type="radio" name="weather" value="windy"> ğŸŒª</label>
            </div>
        </div>
        <div class="diaryText">
            <div class="row">
                <div class="column">
                    <h3>ë°©ë¬¸í•œ ì¥ì†Œ</h3>
                    <input type="text" id="Place">
                </div>
                <div class="column">
                    <h3>ì˜¤ëŠ˜ ë§Œë‚œ ì‚¬ëŒ</h3>
                    <input type="text" id="People">
                </div>
            </div>
            <div class="row">
                <div class="column">
                    <h3>êµ¬ì…í•œ ë¬¼ê±´</h3>
                    <input type="text" id="buy">
                </div>
                <div class="column">  
                    <h3>ì§€ì¶œ ê¸ˆì•¡</h3>
                    <input type="text" id="coin">
                </div>
            </div>
            <div>
                <h3>ì˜¤ëŠ˜ì˜ ë‰´ìŠ¤</h3>
                <input type="text" id="News">
            </div>
        </div>
        <div class="diaryTime">
            <div class="Time">
                <h3>ì˜¤ì „(5ì‹œ~8ì‹œ)</h3>
                <textarea placeholder="ì¼ì–´ë‚˜ì„œ í•œ ì¼"></textarea>
            </div>
            <div class="Time">
                <h3>ì˜¤ì „(8ì‹œ~12ì‹œ)</h3>
                <textarea placeholder="ì•„ì¹¨ì‹ì‚¬ í›„ì— í•œ ì¼"></textarea>
            </div>
            <div class="Time">
                <h3>ì˜¤í›„(12ì‹œ~5ì‹œ)</h3>
                <textarea placeholder="ì˜¤í›„ì— í•œ ì¼"></textarea>
            </div>
            <div class="Time">
                <h3>ì˜¤í›„(5ì‹œ~10ì‹œ)</h3>
                <textarea placeholder="ì €ë…ì‹ì‚¬ í›„ì— í•œ ì¼"></textarea>
            </div>
        </div>
        <button onclick="saveDiary()">ì €ì¥</button>
        <button onclick="goToPage()">ì´ì „í˜ì´ì§€ë¡œ ì´ë™</button>
    </div>
    <script>
        let diaryData = {};
        const goToPage = () => {
            const link = document.createElement('a');
            link.href = '47p.html';
            link.click();
        }
        const writeDiary = (date, content) => {
            diaryData[date] = content;
        }

        const loadDiaryData = (date) => {
            const data = diaryData[date];
            if (data) {
                document.querySelector('#Place').value = data.place || '';
                document.querySelector('#People').value = data.people || '';
                document.querySelector('#buy').value = data.buy || '';
                document.querySelector('#coin').value = data.coin || '';
                document.querySelector('#News').value = data.news || '';
                if (data.weather) {
                    document.querySelector(`input[name="weather"][value="${data.weather}"]`).checked = true;
                }
                document.querySelectorAll('.Time textarea').forEach((textarea, index) => {
                    textarea.value = data.diaryTime[index] || '';
                });
            }
        };

        const clearForm = () => {
            document.querySelector('#Place').value = '';
            document.querySelector('#People').value = '';
            document.querySelector('#buy').value = '';
            document.querySelector('#coin').value = '';
            document.querySelector('#News').value = '';
            document.querySelectorAll('input[name="weather"]').forEach(radio => radio.checked = false);
            document.querySelectorAll('.Time textarea').forEach(textarea => textarea.value = '');
        };

        const readDiary = (selectedDate) => {
            const today = new Date().toISOString().split('T')[0];

            if (selectedDate === today) {
                clearForm();
            } else if (diaryData[selectedDate]) {
                if (confirm('í•´ë‹¹ ë‚ ì§œì˜ ì¼ê¸°ê°€ ìˆìŠµë‹ˆë‹¤. ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    loadDiaryData(selectedDate);
                } else {
                    document.querySelector('#Date').value = '';
                }
            } else {
                if (confirm('í•´ë‹¹ ë‚ ì§œì˜ ì¼ê¸°ë¥¼ ì‘ì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    clearForm();
                } else {
                    document.querySelector('#Date').value = '';
                }
            }
        };
        
        const saveDiary = () => {
            const date = document.querySelector('#Date').value;
            if (!date) {
                alert('ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            const diaryTime = [];
            document.querySelectorAll('.Time textarea').forEach(textarea => {
                diaryTime.push(textarea.value);
            });
            const data = {
                place: document.querySelector('#Place').value,
                people: document.querySelector('#People').value,
                buy: document.querySelector('#buy').value,
                coin: document.querySelector('#coin').value,
                news: document.querySelector('#News').value,
                weather: document.querySelector('input[name="weather"]:checked')?.value,
                diaryTime: diaryTime
            };

            writeDiary(date, data);
            alert('ì¼ê¸°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        };

        document.querySelector('#Date').addEventListener('change', (event) => {
            readDiary(event.target.value);
        });
    </script>
</body>
</html>